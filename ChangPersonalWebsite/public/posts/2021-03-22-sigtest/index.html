<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Anatomy of a Significance Test | Life of Chang</title>
<meta name=keywords content="Anatomy of Significance test,Statistics,Analysis"><meta name=description content="Anatomy of a Significance Test
The Goal
We want to test the difference between attributes of 2 sub-populations
relative to randomly mixed sub-populations and provide numerical
evidence.
The Null Hypothesis
The following equivalent statements are the null hypothesis,
H0 that we are testing.

H0:The sub-populations P1 and
P2 were randomly draw from the same population
H0:The sub-populations P1 and
P2 were created randomly by assigning units in the same
population to each of P1 and P2
H0:The sub-populations P1 and
P2 were randomly generated.

Note that that H0 is weaker to be stated in the form of
a(ğ’«1)â€„=â€„a(ğ’«2), although still correct. Thatâ€™s
why we shouldnâ€™t state H0 in terms of equivalence of
attribute value."><meta name=author content="Chang Liu"><link rel=canonical href=https://hellochang.github.io/posts/2021-03-22-sigtest/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as=style><link rel=icon href=https://hellochang.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://hellochang.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://hellochang.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://hellochang.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://hellochang.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://hellochang.github.io/posts/2021-03-22-sigtest/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css integrity=sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js integrity=sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script><meta property="og:url" content="https://hellochang.github.io/posts/2021-03-22-sigtest/"><meta property="og:site_name" content="Life of Chang"><meta property="og:title" content="Anatomy of a Significance Test"><meta property="og:description" content="Anatomy of a Significance Test The Goal We want to test the difference between attributes of 2 sub-populations relative to randomly mixed sub-populations and provide numerical evidence.
The Null Hypothesis The following equivalent statements are the null hypothesis, H0 that we are testing.
H0:The sub-populations P1 and P2 were randomly draw from the same population H0:The sub-populations P1 and P2 were created randomly by assigning units in the same population to each of P1 and P2 H0:The sub-populations P1 and P2 were randomly generated. Note that that H0 is weaker to be stated in the form of a(ğ’«1)â€„=â€„a(ğ’«2), although still correct. Thatâ€™s why we shouldnâ€™t state H0 in terms of equivalence of attribute value."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:tag" content="Anatomy of Significance Test"><meta property="article:tag" content="Statistics"><meta property="article:tag" content="Analysis"><meta property="og:image" content="https://hellochang.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://hellochang.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Anatomy of a Significance Test"><meta name=twitter:description content="Anatomy of a Significance Test
The Goal
We want to test the difference between attributes of 2 sub-populations
relative to randomly mixed sub-populations and provide numerical
evidence.
The Null Hypothesis
The following equivalent statements are the null hypothesis,
H0 that we are testing.

H0:The sub-populations P1 and
P2 were randomly draw from the same population
H0:The sub-populations P1 and
P2 were created randomly by assigning units in the same
population to each of P1 and P2
H0:The sub-populations P1 and
P2 were randomly generated.

Note that that H0 is weaker to be stated in the form of
a(ğ’«1)â€„=â€„a(ğ’«2), although still correct. Thatâ€™s
why we shouldnâ€™t state H0 in terms of equivalence of
attribute value."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://hellochang.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Anatomy of a Significance Test","item":"https://hellochang.github.io/posts/2021-03-22-sigtest/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Anatomy of a Significance Test","name":"Anatomy of a Significance Test","description":"Anatomy of a Significance Test The Goal We want to test the difference between attributes of 2 sub-populations relative to randomly mixed sub-populations and provide numerical evidence.\nThe Null Hypothesis The following equivalent statements are the null hypothesis, H0 that we are testing.\nH0:The sub-populations P1 and P2 were randomly draw from the same population H0:The sub-populations P1 and P2 were created randomly by assigning units in the same population to each of P1 and P2 H0:The sub-populations P1 and P2 were randomly generated. Note that that H0 is weaker to be stated in the form of a(ğ’«1)â€„=â€„a(ğ’«2), although still correct. Thatâ€™s why we shouldnâ€™t state H0 in terms of equivalence of attribute value.\n","keywords":["Anatomy of Significance test","Statistics","Analysis"],"articleBody":"Anatomy of a Significance Test The Goal We want to test the difference between attributes of 2 sub-populations relative to randomly mixed sub-populations and provide numerical evidence.\nThe Null Hypothesis The following equivalent statements are the null hypothesis, H0 that we are testing.\nH0:The sub-populations P1 and P2 were randomly draw from the same population H0:The sub-populations P1 and P2 were created randomly by assigning units in the same population to each of P1 and P2 H0:The sub-populations P1 and P2 were randomly generated. Note that that H0 is weaker to be stated in the form of a(ğ’«1)â€„=â€„a(ğ’«2), although still correct. Thatâ€™s why we shouldnâ€™t state H0 in terms of equivalence of attribute value.\nHA, the alternate hypothesis is the complement of H0.\nThe Discrepency Measure A discrepancy measure, ğ’Ÿ(ğ’«1,â€†ğ’«2), is\nalso called a test statistic defined to be a specific population attribute for the population ğ’«â€„=â€„{ğ’«1,â€†ğ’«2} to measure properties such as equivariance and invariance used to quantify the inconsistency of our data against the null hypothesis larger discrepancy measures indicate stronger evidence against the null hypothesis forms of ğ’Ÿ(ğ’«1,â€†ğ’«2) is typically based on differences for measures of location, and based on ratios for the measures of spread. For example: A discrepancy measure for hypothesizing that the averages from the two sub-populations are the same might be ğ’Ÿ(ğ’«1,â€†ğ’«2)â€„=â€„|y1â€…âˆ’â€…y2| A discrepancy measure for hypothesizing that the standard deviation from the two sub-populations are the same might be $\\mathcal D(\\mathcal P_1,\\mathcal P_2) = \\left\\lvert 1- \\frac{SD(\\mathcal P_1)}{SD(\\mathcal P_2)} \\right \\rvert$ A discrepancy measure for hypothesizing that the average from the first sub-population is larger than the average from the second sub-population might be ğ’Ÿ(ğ’«1,â€†ğ’«2)â€„=â€„y2â€…âˆ’â€…y1 The Observed Discrepancy The discrepancy measure, ğ’Ÿâ€„=â€„(ğ’«1,â€†ğ’«2), calculated on the two unshuffled(observed) sub population is called the observed discrepancy, dobsâ€„=â€„ğ’Ÿ(ğ’«1,â€†ğ’«2)\nthe discrepancy measure measures only one type of discrepancy between the populations at a time for a null hypothesis, all other differences are ignored for instance, P1 and P2 could have similar standard deviation but different skewness The Observed p-value The probability that a random sub-population chosen has a discrepancy measure at least as large as the observed discrepancy is called the observed p-value p-value =â€„P(ğ’Ÿâ€„â‰¤â€„dobsâ€…âˆ£â€…H0 is true)\nTo approximate the p-value, we use M, which is a large number of shuffled pairs.\nM is shuffled pairs is generated as (ğ’«1,â€†1*,â€†ğ’«2,â€†1*),â€†(ğ’«1,â€†2*,â€†ğ’«2,â€†2*),â€†â€¦,â€†(ğ’«1,â€†M*,â€†ğ’«2,â€†M*) The approximated p-value is $\\widehat{\\text{p-value}} = \\frac{1}{M} \\sum_{i=1}^{M} I\\left(\\mathcal D \\left (\\mathcal P_{1,i}^{*}, \\mathcal P_{2,i}^{*} \\right) \\leq d_{obs} \\right)$, where dobsâ€„=â€„ğ’Ÿ(ğ’«1,â€†ğ’«2)\nTo calculate the exact p-value instead of an approximation, use $M = {N_1 +N_2 \\choose N_1}= {N_1 +N_2 \\choose N_2}$, where all possible shuffles are considered. The exact p-value is less commonly calculated because there are way too many possible permutations and it is inefficient.\nSmaller p-value indicate more evidence against the null hypothesis.\np-value \u003c 0.001 shows very strong evidence against H0 0.001 \u003c p-value \u003c 0.01 shows that there is strong evidence against H0 0.01 \u003c p-value \u003c 0.05 shows that there is evidence against H0 0.05 \u003c p-value \u003c 0.1 shows that there is weak evidence against H0 p-value \u003e 0.1 shows that there is no evidence against H0 If p-value = 0, we have a proof by contradiction because something impossible is observed and the hypothesis must be false. Example This example compares the final exam grade of male and female students. First, letâ€™s set things up!\nMarks = read.csv(\"Marks.csv\", header=TRUE) Final.Female = Marks$Final[Marks$Gender==\"Female\"] Final.Male = Marks$Final[Marks$Gender==\"Male\"] pop = list(pop1 = Final.Female , pop2 = Final.Male) We will consider the following 2 discrepancy measure, $\\mathcal D_1(\\mathcal P_1,\\mathcal P_2)=\\frac{SD(\\mathcal P_1)}{SD(\\mathcal P_2)}-1$ and $\\mathcal D_2(\\mathcal P_1,\\mathcal P_2)=\\frac{\\bar{Y_1} - \\bar{Y_2}}{\\tilde{\\sigma} \\sqrt{\\frac{1}{n_1}+\\frac{1}{n_2}}}-1$. Note that ğ’Ÿ1 is a measure of spread and ğ’Ÿ2 is a measure of central tendency.\nFirst, letâ€™s define a function to generate random shuffles in R.\nmixRandomly \u003c- function(pop) { pop1 \u003c- pop$pop1; n_pop1 \u003c- length(pop1) pop2 \u003c- pop$pop2; n_pop2 \u003c- length(pop2); mix \u003c- c(pop1,pop2) select4pop1 \u003c- sample(1:(n_pop1 + n_pop2), n_pop1, replace = FALSE) new_pop1 = mix[select4pop1]; new_pop2 = mix[-select4pop1] list(pop1=new_pop1, pop2=new_pop2) } Now,we make functions that calculate our discrepancy measures.\n# D1 as a function D1Fn \u003c- function(pop) { ## First sub-population pop1 \u003c- pop$pop1; n1 = length(pop1); SD1 \u003c- sqrt(var(pop1)*(n1-1)/n1) ## Second sub-population pop2 \u003c- pop$pop2; n2 = length(pop2); SD2 \u003c- sqrt(var(pop2)*(n2-1)/n2) ## Determine the test statistic temp \u003c- SD1/SD2 - 1 temp } # D2 as a function D2Fn \u003c- function(pop) { ## First sub-population pop1 \u003c- pop$pop1; n1 \u003c- length(pop1); m1 \u003c- mean(pop1); v1 \u003c- var(pop1) ## Second sub-population pop2 \u003c- pop$pop2; n2 \u003c- length(pop2); m2 \u003c- mean(pop2); v2 \u003c- var(pop2) ## Pool the variances v \u003c- ((n1 - 1) * v1 + (n2 - 1) * v2)/(n1 + n2 - 2) ## Determine the t-statistic temp \u003c- (m1 - m2) / sqrt(v * ( (1/n1) + (1/n2) ) ) temp } Here, we generated the histograms of our 2 discrepancy measures based on 5000 shuffles of the two sub-populations.\npar(mfrow = c(1,2)) # Plot for D1 D1Vals \u003c- sapply(1:5000, FUN = function(...){ D1Fn(mixRandomly(pop))}) hist(D1Vals, breaks=40, probability = TRUE, main = \"Permuted populations\", xlab=\"D1 statistic\") abline(v=D1Fn(pop), col = \"red\", lwd=2) # Plot for D2 D2Vals \u003c- sapply(1:5000, FUN = function(...){ D2Fn(mixRandomly(pop)) }) hist(D2Vals, breaks=40, probability = TRUE, main = \"Permuted populations\", xlab=\"D2 statistic\") abline(v=D2Fn(pop), col = \"red\", lwd=2) From this graph, we could see that our two sub-populations of male vs female final exam grade seems to be a random mix of the parent population when considering measures of the spread, ğ’Ÿ1. On the other hand, the two sub-populations of male vs female final exam grade seems to not be a random mix of the parent population when considering measures of the central tendency, ğ’Ÿ2.\nNow, letâ€™s test the null hypothesis and check whether our two sub-population is indeed generated by random mixing for ğ’Ÿ2(ğ’«1,â€†ğ’«2).\nD2obs = D2Fn(pop) mean(abs(D2Vals) \u003e= abs(D2obs)) ## [1] 0.0054 Since our value here is very small and much less than 0.01. We know that there is strong evidence against the null hypothesis. In the context of our situation, there is strong evidence that the final marks of male students vs.Â female students is not a random mix of the parent population.\n","wordCount":"1061","inLanguage":"en","image":"https://hellochang.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","author":{"@type":"Person","name":"Chang Liu"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://hellochang.github.io/posts/2021-03-22-sigtest/"},"publisher":{"@type":"Organization","name":"Life of Chang","logo":{"@type":"ImageObject","url":"https://hellochang.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://hellochang.github.io/ accesskey=h title="Life of Chang (Alt + H)"><img src=https://hellochang.github.io/apple-touch-icon.png alt aria-label=logo height=35>Life of Chang</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://hellochang.github.io/aboutme/ title="About me"><span>About me</span></a></li><li><a href=https://www.instagram.com/changphotostudio title=Photos><span>Photos</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://hellochang.github.io/>Home</a>&nbsp;Â»&nbsp;<a href=https://hellochang.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Anatomy of a Significance Test</h1><div class=post-meta>5 min&nbsp;Â·&nbsp;1061 words&nbsp;Â·&nbsp;Chang Liu&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content rel="noopener noreferrer" target=_blank>Edit</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#the-goal>The Goal</a></li><li><a href=#the-null-hypothesis>The Null Hypothesis</a></li><li><a href=#the-discrepency-measure>The Discrepency Measure</a></li><li><a href=#the-observed-discrepancy>The Observed Discrepancy</a></li><li><a href=#the-observed-p-value>The Observed p-value</a></li><li><a href=#example>Example</a></li></ul></nav></div></details></div><div class=post-content><h1 id=anatomy-of-a-significance-test>Anatomy of a Significance Test<a hidden class=anchor aria-hidden=true href=#anatomy-of-a-significance-test>#</a></h1><h2 id=the-goal>The Goal<a hidden class=anchor aria-hidden=true href=#the-goal>#</a></h2><p>We want to test the difference between attributes of 2 sub-populations
relative to randomly mixed sub-populations and provide numerical
evidence.</p><h2 id=the-null-hypothesis>The Null Hypothesis<a hidden class=anchor aria-hidden=true href=#the-null-hypothesis>#</a></h2><p>The following equivalent statements are the <strong>null hypothesis</strong>,
<em>H</em>0 that we are testing.</p><ul><li><em>H</em>0:The sub-populations <em>P</em>1 and
<em>P</em>2 were randomly draw from the same population</li><li><em>H</em>0:The sub-populations <em>P</em>1 and
<em>P</em>2 were created randomly by assigning units in the same
population to each of <em>P</em>1 and <em>P</em>2</li><li><em>H</em>0:The sub-populations <em>P</em>1 and
<em>P</em>2 were randomly generated.</li></ul><p>Note that that <em>H</em>0 is weaker to be stated in the form of
<em>a</em>(ğ’«1)â€„=â€„<em>a</em>(ğ’«2), although still correct. Thatâ€™s
why we shouldnâ€™t state <em>H</em>0 in terms of equivalence of
attribute value.</p><p><em>H</em><em>A</em>, the <strong>alternate hypothesis</strong> is the complement of
<em>H</em>0.</p><h2 id=the-discrepency-measure>The Discrepency Measure<a hidden class=anchor aria-hidden=true href=#the-discrepency-measure>#</a></h2><p>A discrepancy measure, ğ’Ÿ(ğ’«1,â€†ğ’«2), is</p><ul><li>also called a <strong>test statistic</strong></li><li>defined to be a specific population attribute for the population
ğ’«â€„=â€„{ğ’«1,â€†ğ’«2} to measure properties such as
equivariance and invariance</li><li>used to quantify the inconsistency of our data against the null
hypothesis</li><li>larger discrepancy measures indicate stronger evidence against the
null hypothesis</li><li>forms of ğ’Ÿ(ğ’«1,â€†ğ’«2) is typically based on
differences for measures of location, and based on ratios for the
measures of spread. For example:<ul><li>A discrepancy measure for hypothesizing that the averages from
the two sub-populations are the same might be
ğ’Ÿ(ğ’«1,â€†ğ’«2)â€„=â€„|<em>y</em>1â€…âˆ’â€…<em>y</em>2|</li><li>A discrepancy measure for hypothesizing that the standard
deviation from the two sub-populations are the same might be
$\mathcal D(\mathcal P_1,\mathcal P_2) = \left\lvert 1- \frac{SD(\mathcal P_1)}{SD(\mathcal P_2)} \right \rvert$</li><li>A discrepancy measure for hypothesizing that the average from
the first sub-population is larger than the average from the
second sub-population might be
ğ’Ÿ(ğ’«1,â€†ğ’«2)â€„=â€„<em>y</em>2â€…âˆ’â€…<em>y</em>1</li></ul></li></ul><h2 id=the-observed-discrepancy>The Observed Discrepancy<a hidden class=anchor aria-hidden=true href=#the-observed-discrepancy>#</a></h2><p>The discrepancy measure, ğ’Ÿâ€„=â€„(ğ’«1,â€†ğ’«2), calculated
on the two unshuffled(observed) sub population is called the observed
discrepancy,
<em>d</em><em>o<strong>b</strong>s</em>â€„=â€„ğ’Ÿ(ğ’«1,â€†ğ’«2)</p><ul><li>the discrepancy measure measures only one type of discrepancy
between the populations at a time for a null hypothesis, all other
differences are ignored</li><li>for instance, <em>P</em>1 and <em>P</em>2 could have similar
standard deviation but different skewness</li></ul><h2 id=the-observed-p-value>The Observed p-value<a hidden class=anchor aria-hidden=true href=#the-observed-p-value>#</a></h2><p>The probability that a random sub-population chosen has a discrepancy
measure at least as large as the observed discrepancy is called the
observed p-value
p-value â€„=â€„<em>P</em>(ğ’Ÿâ€„â‰¤â€„<em>d</em><em>o<strong>b</strong>s</em>â€…âˆ£â€…<em>H</em>0 is true)</p><ul><li><p>To approximate the p-value, we use <em>M</em>, which is a large number of
shuffled pairs.</p><ul><li>M is shuffled pairs is generated as
(ğ’«1,â€†1*,â€†ğ’«2,â€†1*),â€†(ğ’«1,â€†2*,â€†ğ’«2,â€†2*),â€†&mldr;,â€†(ğ’«1,â€†<em>M</em>*,â€†ğ’«2,â€†<em>M</em>*)</li></ul></li><li><p>The approximated p-value is
$\widehat{\text{p-value}} = \frac{1}{M} \sum_{i=1}^{M} I\left(\mathcal D \left (\mathcal P_{1,i}^{*}, \mathcal P_{2,i}^{*} \right) \leq d_{obs} \right)$,
where <em>d</em><em>o<strong>b</strong>s</em>â€„=â€„ğ’Ÿ(ğ’«1,â€†ğ’«2)</p></li><li><p>To calculate the exact p-value instead of an approximation, use
$M = {N_1 +N_2 \choose N_1}= {N_1 +N_2 \choose N_2}$, where
all possible shuffles are considered. The exact p-value is less
commonly calculated because there are way too many possible
permutations and it is inefficient.</p></li><li><p>Smaller p-value indicate more evidence against the null hypothesis.</p><ul><li>p-value &lt; 0.001 shows very strong evidence against
<em>H</em>0</li><li>0.001 &lt; p-value &lt; 0.01 shows that there is strong evidence
against <em>H</em>0</li><li>0.01 &lt; p-value &lt; 0.05 shows that there is evidence against
<em>H</em>0</li><li>0.05 &lt; p-value &lt; 0.1 shows that there is weak evidence
against <em>H</em>0</li><li>p-value > 0.1 shows that there is no evidence against
<em>H</em>0</li><li>If p-value = 0, we have a proof by contradiction because
something impossible is observed and the hypothesis must be
false.</li></ul></li></ul><h2 id=example>Example<a hidden class=anchor aria-hidden=true href=#example>#</a></h2><p>This example compares the final exam grade of male and female students.
First, letâ€™s set things up!</p><pre><code>Marks = read.csv(&quot;Marks.csv&quot;, header=TRUE)
Final.Female = Marks$Final[Marks$Gender==&quot;Female&quot;]
Final.Male = Marks$Final[Marks$Gender==&quot;Male&quot;]
pop = list(pop1 = Final.Female , pop2 = Final.Male)
</code></pre><p>We will consider the following 2 discrepancy measure,
$\mathcal D_1(\mathcal P_1,\mathcal P_2)=\frac{SD(\mathcal P_1)}{SD(\mathcal P_2)}-1$
and
$\mathcal D_2(\mathcal P_1,\mathcal P_2)=\frac{\bar{Y_1} - \bar{Y_2}}{\tilde{\sigma} \sqrt{\frac{1}{n_1}+\frac{1}{n_2}}}-1$.
Note that ğ’Ÿ1 is a measure of spread and ğ’Ÿ2 is a
measure of central tendency.</p><p>First, letâ€™s define a function to generate random shuffles in R.</p><pre><code>mixRandomly &lt;- function(pop) {
  pop1 &lt;- pop$pop1;  n_pop1 &lt;- length(pop1)
  pop2 &lt;- pop$pop2; n_pop2 &lt;- length(pop2); mix &lt;- c(pop1,pop2)
  select4pop1 &lt;- sample(1:(n_pop1 + n_pop2), n_pop1,  replace = FALSE)
  new_pop1 = mix[select4pop1]; new_pop2 = mix[-select4pop1]
  list(pop1=new_pop1, pop2=new_pop2)
}
</code></pre><p>Now,we make functions that calculate our discrepancy measures.</p><pre><code># D1 as a function
D1Fn &lt;- function(pop) {
    ## First sub-population
    pop1 &lt;- pop$pop1; n1 = length(pop1); SD1 &lt;- sqrt(var(pop1)*(n1-1)/n1)
    ## Second sub-population
    pop2 &lt;- pop$pop2; n2 = length(pop2); SD2 &lt;- sqrt(var(pop2)*(n2-1)/n2)
    ## Determine the test statistic
    temp &lt;- SD1/SD2 - 1
    temp
}

# D2 as a function
D2Fn &lt;- function(pop) {
    ## First sub-population
    pop1 &lt;- pop$pop1; n1 &lt;- length(pop1); m1 &lt;- mean(pop1); v1 &lt;- var(pop1)
    ## Second sub-population
    pop2 &lt;- pop$pop2; n2 &lt;- length(pop2); m2 &lt;- mean(pop2); v2 &lt;- var(pop2)
    ## Pool the variances
    v &lt;- ((n1 - 1) * v1 + (n2 - 1) * v2)/(n1 + n2 - 2)
    ## Determine the t-statistic
    temp &lt;- (m1 - m2) / sqrt(v * ( (1/n1) + (1/n2) ) )
    temp
}
</code></pre><p>Here, we generated the histograms of our 2 discrepancy measures based on
5000 shuffles of the two sub-populations.</p><pre><code>par(mfrow = c(1,2))

# Plot for D1
D1Vals &lt;- sapply(1:5000, FUN = function(...){
  D1Fn(mixRandomly(pop))})
hist(D1Vals, breaks=40, probability = TRUE, 
     main = &quot;Permuted populations&quot;, xlab=&quot;D1 statistic&quot;)
abline(v=D1Fn(pop), col = &quot;red&quot;, lwd=2)

# Plot for D2
D2Vals &lt;- sapply(1:5000, FUN = function(...){ D2Fn(mixRandomly(pop)) })
hist(D2Vals, breaks=40, probability = TRUE,  
     main = &quot;Permuted populations&quot;, xlab=&quot;D2 statistic&quot;)
abline(v=D2Fn(pop), col = &quot;red&quot;, lwd=2)
</code></pre><p><img loading=lazy src=a4q3_files/figure-markdown_strict/unnamed-chunk-4-1.png></p><p>From this graph, we could see that our two sub-populations of male vs
female final exam grade seems to be a random mix of the parent
population when considering measures of the spread, ğ’Ÿ1. On
the other hand, the two sub-populations of male vs female final exam
grade seems to <em>not</em> be a random mix of the parent population when
considering measures of the central tendency, ğ’Ÿ2.</p><p>Now, letâ€™s test the null hypothesis and check whether our two
sub-population is indeed generated by random mixing for
ğ’Ÿ2(ğ’«1,â€†ğ’«2).</p><pre><code>D2obs = D2Fn(pop) 
mean(abs(D2Vals) &gt;= abs(D2obs))

## [1] 0.0054
</code></pre><p>Since our value here is very small and much less than 0.01. We know that
there is strong evidence against the null hypothesis. In the context of
our situation, there is strong evidence that the final marks of male
students vs.Â female students is <em>not</em> a random mix of the parent
population.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://hellochang.github.io/tags/anatomy-of-significance-test/>Anatomy of Significance Test</a></li><li><a href=https://hellochang.github.io/tags/statistics/>Statistics</a></li><li><a href=https://hellochang.github.io/tags/analysis/>Analysis</a></li></ul><nav class=paginav><a class=prev href=https://hellochang.github.io/posts/2020-04-22-super-bowl/><span class=title>Â« Prev</span><br><span>An Analysis of Superbowl TV Shows</span>
</a><a class=next href=https://hellochang.github.io/posts/2021-03-18-bootstrap-t/><span class=title>Next Â»</span><br><span>Bootstrap-t Confidence Interval</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Anatomy of a Significance Test on x" href="https://x.com/intent/tweet/?text=Anatomy%20of%20a%20Significance%20Test&amp;url=https%3a%2f%2fhellochang.github.io%2fposts%2f2021-03-22-sigtest%2f&amp;hashtags=AnatomyofSignificancetest%2cStatistics%2cAnalysis"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Anatomy of a Significance Test on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fhellochang.github.io%2fposts%2f2021-03-22-sigtest%2f&amp;title=Anatomy%20of%20a%20Significance%20Test&amp;summary=Anatomy%20of%20a%20Significance%20Test&amp;source=https%3a%2f%2fhellochang.github.io%2fposts%2f2021-03-22-sigtest%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Anatomy of a Significance Test on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fhellochang.github.io%2fposts%2f2021-03-22-sigtest%2f&title=Anatomy%20of%20a%20Significance%20Test"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Anatomy of a Significance Test on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fhellochang.github.io%2fposts%2f2021-03-22-sigtest%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Anatomy of a Significance Test on whatsapp" href="https://api.whatsapp.com/send?text=Anatomy%20of%20a%20Significance%20Test%20-%20https%3a%2f%2fhellochang.github.io%2fposts%2f2021-03-22-sigtest%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Anatomy of a Significance Test on telegram" href="https://telegram.me/share/url?text=Anatomy%20of%20a%20Significance%20Test&amp;url=https%3a%2f%2fhellochang.github.io%2fposts%2f2021-03-22-sigtest%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Anatomy of a Significance Test on ycombinator" href="https://news.ycombinator.com/submitlink?t=Anatomy%20of%20a%20Significance%20Test&u=https%3a%2f%2fhellochang.github.io%2fposts%2f2021-03-22-sigtest%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>Copyright Â© Chang Liu</span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>